(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{93:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(9),s=a.n(r),o=a(20),i=a(15),l=a(11),u=a(23),j=a(55),b=a(2);function h(e){var t=e.isAuth,a=e.where,n=e.component,c=Object(j.a)(e,["isAuth","where","component"]);return Object(b.jsx)(l.b,Object(u.a)(Object(u.a)({},c),{},{render:function(){return t?Object(b.jsx)(n,{}):Object(b.jsx)(l.a,{to:a})}}))}var m=function(){return Object(b.jsx)("nav",{className:"navbar navbar-expand-lg navbar-light bg-primary",children:Object(b.jsxs)("div",{className:"container",children:[Object(b.jsx)(i.b,{className:"navbar-brand",to:"/",children:Object(b.jsx)("b",{className:"text-light",children:"Chat Room"})}),Object(b.jsx)("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarText","aria-controls":"navbarText","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(b.jsx)("span",{className:"navbar-toggler-icon"})}),Object(b.jsx)("div",{className:"collapse navbar-collapse justify-content-end",id:"navbarText",children:Object(b.jsxs)("ul",{className:"navbar-nav mb-2 mb-lg-0",children:[Object(b.jsx)("li",{className:"nav-item px-4",children:Object(b.jsx)(i.b,{className:"nav-link text-white",to:"/",children:"Registrar"})}),Object(b.jsx)("li",{className:"nav-item px-4",children:Object(b.jsx)(i.b,{className:"nav-link text-white",to:"/chat/",children:"Chat"})}),Object(b.jsx)("li",{className:"nav-item px-4",children:Object(b.jsx)(i.b,{className:"nav-link text-white",to:"/logout/",children:"Salir"})})]})})]})})};var d=function(e){return e.auth,Object(b.jsx)("div",{children:Object(b.jsx)("p",{children:"Registrarse"})})};var x=function(){return Object(b.jsx)("div",{children:Object(b.jsx)("p",{children:"Not Found"})})},O=a(24),p=a.n(O);var f=function(){var e=Object(l.h)().room_name,t=new WebSocket("ws://127.0.0.1:8000/ws/chat/".concat(e,"/")),a=c.a.useRef(),r=c.a.useRef(),s=c.a.useState({name:""}),i=Object(o.a)(s,2),u=i[0],j=i[1];c.a.useEffect((function(){t.onopen=function(){console.log("Connected to Django Services")},t.onmessage=function(e){var t=JSON.parse(e.data);a.current.value+="".concat(t.user,": ").concat(t.message," \n")},p.a.get("http://127.0.0.1:8000/user/current_user/",{headers:{Authorization:"Token 0a24132e27534aa5d145898ab1e86b34b83a9058"}}).then((function(e){var t=e.data;j({name:t.user})}))}),[]);var h=function(){r.current.value&&(t.send(JSON.stringify({message:r.current.value,user:u.name})),r.current.value="")};return Object(b.jsx)(n.Fragment,{children:Object(b.jsx)("div",{className:"row justify-content-center mt-5",children:Object(b.jsxs)("div",{className:"col-md-4",children:[Object(b.jsxs)("div",{className:"form-floating",children:[Object(b.jsx)("textarea",{readOnly:!0,style:{height:"320px",background:"#fff"},className:"form-control",id:"floatingTextarea",ref:a}),Object(b.jsxs)("label",{className:"text-success",htmlFor:"floatingTextarea",children:["Chat: ",Object(b.jsx)("b",{children:e})]})]}),Object(b.jsxs)("div",{className:"input-group mb-3 mt-2",children:[Object(b.jsx)("input",{id:"message-input",type:"text",className:"form-control",placeholder:"Message...",ref:r,onKeyUp:function(e){13===e.keyCode&&r.current.value&&h()}}),Object(b.jsx)("input",{className:"btn btn-outline-success",type:"button",id:"button-chat",onClick:h,value:"Button"})]})]})})})},g=a(28),v=a(135),N=a(132),k=a(130),w=a(131),y={inputs:[{label:"Nombre de la sala",name:"room",focus:!0,required:!0}]},C=a(133);var S=function(e){var t=e.onChange,a=e.inputs;return Object(b.jsx)(b.Fragment,{children:a.map((function(e,a){return Object(b.jsx)(C.a,{variant:"outlined",margin:"normal",fullWidth:!0,label:e.label,name:e.name,onChange:t,autoFocus:e.focus,required:e.required},a)}))})},A=a(134);var T=function(e){var t=e.classes,a=e.type;return Object(b.jsx)(A.a,{type:a,fullWidth:!0,variant:"contained",className:t,children:"Entrar"})};var E=function(){var e=c.a.useState({name:""}),t=Object(o.a)(e,2),a=t[0],n=t[1];return c.a.useEffect((function(){p.a.get("http://127.0.0.1:8000/user/current_user/",{headers:{Authorization:"Token ".concat("0a24132e27534aa5d145898ab1e86b34b83a9058")}}).then((function(e){var t=e.data;n({name:t.user})}))}),[]),a.name},I=Object(k.a)((function(e){return{paper:{marginTop:e.spacing(12),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:"#0094C6",width:"5rem",height:"5rem"},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(2,0,2),backgroundColor:"#0094C6",color:"white","&:hover":{backgroundColor:"#005E7C"}},user:{color:"Green",fontWeight:"bold"}}}));function F(){var e=I(),t=c.a.useState({room:""}),a=Object(o.a)(t,2),n=a[0],r=a[1],s=Object(l.g)();return Object(b.jsx)(w.a,{maxWidth:"xs",children:Object(b.jsxs)("div",{className:e.paper,children:[Object(b.jsx)(v.a,{className:e.avatar}),Object(b.jsxs)(N.a,{component:"h1",variant:"h5",children:["Bienvenido: ",Object(b.jsx)("span",{className:e.user,children:Object(b.jsx)(E,{})})]}),Object(b.jsxs)("form",{className:e.form,onSubmit:function(e){s.push("/chat/".concat(n.room,"/")),e.preventDefault()},children:[Object(b.jsx)(S,{inputs:y.inputs,onChange:function(e){r(Object(u.a)(Object(u.a)({},n),{},Object(g.a)({},e.target.name,e.target.value)))}}),Object(b.jsx)(T,{type:"submit",classes:e.submit})]})]})})}var _=function(e){var t=e.setToken,a=Object(l.g)(),n=c.a.useState({email:"",password:""}),r=Object(o.a)(n,2),s=r[0],i=r[1],j=function(e){i(Object(u.a)(Object(u.a)({},s),{},Object(g.a)({},e.target.name,e.target.value)))};return Object(b.jsx)("div",{className:"row justify-content-center",children:Object(b.jsx)("div",{className:"col-md-6",children:Object(b.jsxs)("form",{children:[Object(b.jsxs)("div",{className:"mb-3",children:[Object(b.jsx)("label",{htmlFor:"exampleInputEmail1",className:"form-label",children:"Correo Electr\xf3nico"}),Object(b.jsx)("input",{type:"email",name:"email",onChange:j,className:"form-control"}),Object(b.jsx)("div",{id:"emailHelp",className:"form-text",children:"Este correo eletr\xf3nico no ser\xe1 compartido con nadie."})]}),Object(b.jsxs)("div",{className:"mb-3",children:[Object(b.jsx)("label",{htmlFor:"exampleInputPassword1",className:"form-label",children:"Contrase\xf1a"}),Object(b.jsx)("input",{type:"password",name:"password",onChange:j,className:"form-control"})]}),Object(b.jsx)("button",{type:"button",onClick:function(e){e.preventDefault(),p.a.post("http://localhost:8000/api/v1/token/login/",{password:s.password,email:s.email}).then((function(e){t(e.data.auth_token),localStorage.setItem("token",e.data.auth_token),a.push("/chat/")})).catch((function(e){console.log(e)}))},className:"btn btn-primary",children:"Entrar"})]})})})};var D=function(e){return e.setAuth,e.token,Object(l.g)(),Object(b.jsxs)("div",{children:[Object(b.jsx)("p",{children:"LogOut Page"}),Object(b.jsx)("button",{onClick:function(e){e.preventDefault(),p.a.post("http://localhost:8000/api/v1/token/logout/",null,{headers:{Authorization:"token ".concat(localStorage.getItem("token"))}}).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))},children:"Logout"})]})};function R(){var e=c.a.useState(),t=Object(o.a)(e,2),a=t[0],n=t[1],r=c.a.useState(!1),s=Object(o.a)(r,2),u=s[0],j=s[1];return c.a.useEffect((function(){localStorage.getItem("token")&&(n(localStorage.getItem("token")),j(!0))}),[a]),Object(b.jsxs)(i.a,{children:[Object(b.jsx)(m,{}),Object(b.jsxs)(l.d,{children:[Object(b.jsx)(h,{exact:!0,isAuth:u,where:"/login",path:"/chat/:room_name",component:function(){return Object(b.jsx)(f,{})}}),Object(b.jsx)(h,{exact:!0,isAuth:u,where:"/login/",path:"/chat",component:function(){return Object(b.jsx)(F,{})}}),Object(b.jsx)(h,{exact:!0,isAuth:!u,where:"/chat/",path:"/login",component:function(){return Object(b.jsx)(_,{setToken:n})}}),Object(b.jsx)(h,{exact:!0,isAuth:u,where:"/chat/",path:"/logout",component:function(){return Object(b.jsx)(D,{setAuth:j,token:a})}}),Object(b.jsx)(h,{exact:!0,isAuth:!u,where:"/chat/",path:"/",component:function(){return Object(b.jsx)(d,{})}}),Object(b.jsx)(l.b,{component:function(){return Object(b.jsx)(x,{})}})]})]})}var W=function(){return Object(b.jsx)(R,{})};s.a.render(Object(b.jsx)(c.a.StrictMode,{children:Object(b.jsx)(W,{})}),document.getElementById("root"))}},[[93,1,2]]]);
//# sourceMappingURL=main.9c4de649.chunk.js.map