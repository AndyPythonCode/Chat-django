{"version":3,"sources":["django_context/get_context_data.js","Components/Room.js","App.js","index.js"],"names":["context","user_name","tag","value","document","getElementById","JSON","parse","textContent","get_context_data","Room","room_name","useParams","client","WebSocket","out_put","React","useRef","in_put","useEffect","onopen","console","log","onmessage","Message","data","current","user","message","sendMessage","send","stringify","className","readOnly","style","height","background","id","ref","htmlFor","type","placeholder","aria-label","aria-describedby","onKeyUp","key","keyCode","onClick","App","path","exact","ReactDOM","render","StrictMode"],"mappings":"6KAaeA,EAJC,CACdC,UAVuB,SAACC,GACxB,IAAMC,EAAQC,SAASC,eAAeH,GACtC,OAAKC,EAGIG,KAAKC,MAAMJ,EAAMK,aAFjB,WAOEC,CAAiB,c,OC2EfC,MAjFf,WAAiB,IACTC,EAAcC,cAAdD,UACAE,EAAS,IAAIC,UAAJ,sCAA6CH,EAA7C,MACTI,EAAUC,IAAMC,SAChBC,EAASF,IAAMC,SAGrBE,qBAAU,WACRN,EAAOO,OAAS,WACdC,QAAQC,IAAI,kCAIdT,EAAOU,UAAY,SAACC,GAClB,IAAMC,EAAOnB,KAAKC,MAAMiB,EAAQC,MAChCV,EAAQW,QAAQvB,OAAhB,UAA4BsB,EAAKE,KAAjC,aAA0CF,EAAKG,QAA/C,WAKJ,IAAMC,EAAc,WACdX,EAAOQ,QAAQvB,QACjBU,EAAOiB,KACLxB,KAAKyB,UAAU,CACbH,QAASV,EAAOQ,QAAQvB,MACxBwB,KAAM3B,EAAQC,aAGlBiB,EAAOQ,QAAQvB,MAAQ,KAW3B,OACE,cAAC,WAAD,UACE,qBAAK6B,UAAU,kCAAf,SACE,sBAAKA,UAAU,WAAf,UACE,sBAAKA,UAAU,gBAAf,UACE,0BACEC,UAAQ,EACRC,MAAO,CAAEC,OAAQ,QAASC,WAAY,QACtCJ,UAAU,eACVK,GAAG,mBACHC,IAAKvB,IAEP,wBAAOiB,UAAU,eAAeO,QAAQ,mBAAxC,mBACQ,4BAAI5B,UAId,sBAAKqB,UAAU,wBAAf,UACE,uBACEK,GAAG,gBACHG,KAAK,OACLR,UAAU,eACVS,YAAY,aACZC,aAAW,uBACXC,mBAAiB,cACjBL,IAAKpB,EACL0B,QAhCO,SAACC,GACE,KAAhBA,EAAIC,SAAkB5B,EAAOQ,QAAQvB,OACvC0B,OAgCM,uBACEG,UAAU,0BACVQ,KAAK,SACLH,GAAG,cACHU,QAASlB,EACT1B,MAAM,sB,QCzDL6C,MAff,WACE,OACE,cAAC,IAAD,UACE,eAAC,IAAD,WACE,cAAC,IAAD,CAAOC,KAAK,mBAAZ,SACE,cAAC,EAAD,MAEF,cAAC,IAAD,CAAOC,OAAK,EAACD,KAAK,IAAlB,SACE,+DCPVE,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFjD,SAASC,eAAe,W","file":"static/js/main.dff12362.chunk.js","sourcesContent":["const get_context_data = (tag) => {\r\n  const value = document.getElementById(tag);\r\n  if (!value) {\r\n    return \"Notfound\";\r\n  } else {\r\n    return JSON.parse(value.textContent);\r\n  }\r\n};\r\n\r\nconst context = {\r\n  user_name: get_context_data(\"user_name\"),\r\n};\r\n\r\nexport default context;\r\n","import React, { Fragment, useEffect } from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport context from \"../django_context/get_context_data\";\r\n\r\nfunction Room() {\r\n  let { room_name } = useParams();\r\n  const client = new WebSocket(`ws://127.0.0.1:8000/ws/chat/${room_name}/`);\r\n  const out_put = React.useRef();\r\n  const in_put = React.useRef();\r\n\r\n  //se ejecuta despuÃ©s de cada renderizado.\r\n  useEffect(() => {\r\n    client.onopen = () => {\r\n      console.log(\"Connected to Django Servicess\");\r\n    };\r\n\r\n    //get message\r\n    client.onmessage = (Message) => {\r\n      const data = JSON.parse(Message.data);\r\n      out_put.current.value += `${data.user}: ${data.message} \\n`;\r\n    };\r\n  });\r\n\r\n  //set message\r\n  const sendMessage = () => {\r\n    if (in_put.current.value) {\r\n      client.send(\r\n        JSON.stringify({\r\n          message: in_put.current.value,\r\n          user: context.user_name,\r\n        })\r\n      );\r\n      in_put.current.value = \"\";\r\n    }\r\n  };\r\n\r\n  //KeyCode === 13 is 'ENTER' on the keyboard\r\n  const pressEnter = (key) => {\r\n    if (key.keyCode === 13 && in_put.current.value) {\r\n      sendMessage();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <div className=\"row justify-content-center mt-5\">\r\n        <div className=\"col-md-4\">\r\n          <div className=\"form-floating\">\r\n            <textarea\r\n              readOnly\r\n              style={{ height: \"320px\", background: \"#fff\" }}\r\n              className=\"form-control\"\r\n              id=\"floatingTextarea\"\r\n              ref={out_put}\r\n            ></textarea>\r\n            <label className=\"text-success\" htmlFor=\"floatingTextarea\">\r\n              Chat: <b>{room_name}</b>\r\n            </label>\r\n          </div>\r\n\r\n          <div className=\"input-group mb-3 mt-2\">\r\n            <input\r\n              id=\"message-input\"\r\n              type=\"text\"\r\n              className=\"form-control\"\r\n              placeholder=\"Message...\"\r\n              aria-label=\"Recipient's username\"\r\n              aria-describedby=\"button-chat\"\r\n              ref={in_put}\r\n              onKeyUp={pressEnter}\r\n            />\r\n            <input\r\n              className=\"btn btn-outline-success\"\r\n              type=\"button\"\r\n              id=\"button-chat\"\r\n              onClick={sendMessage}\r\n              value=\"Button\"\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </Fragment>\r\n  );\r\n}\r\n\r\nexport default Room;\r\n","import React from \"react\";\r\nimport Room from \"./Components/Room\";\r\nimport { BrowserRouter as Router, Switch, Route } from \"react-router-dom\";\r\n\r\nfunction App() {\r\n  return (\r\n    <Router>\r\n      <Switch>\r\n        <Route path=\"/chat/:room_name\">\r\n          <Room />\r\n        </Route>\r\n        <Route exact path=\"/\">\r\n          <p>Hola Mundo a todos!!!!</p>\r\n        </Route>\r\n      </Switch>\r\n    </Router>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n\r\n"],"sourceRoot":""}